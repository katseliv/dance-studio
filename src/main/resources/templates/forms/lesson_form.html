<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>Create Lesson</title>
</head>
<body>
<div class="container p-5 overflow-hidden">
    <h1 class="h3 mb-5 fw-normal text-center">Create Lesson</h1>
    <div class="container w-25">
        <form id="lessonForm" th:action="@{/lessons/create}" th:object="${lesson}" method="post">
            <div class="mb-3">
                <label for="userTrainerId" class="form-label">Trainer</label>
                <select th:field="*{userTrainerId}" class="form-select" aria-label="Default select example"
                        id="userTrainerId">
                    <option th:value="0" selected>Choose one</option>
                    <option th:each="userTrainer : ${trainers}" th:value="${userTrainer.id}"
                            th:utext="|${userTrainer.firstName} ${userTrainer.lastName}|">
                    </option>
                </select>
            </div>
            <div class="mb-3">
                <label for="danceStyleId" class="form-label">Dance Style</label>
                <select th:field="*{danceStyleId}" class="form-select" aria-label="Default select example"
                        id="danceStyleId">
                    <option th:value="0" selected>Choose one</option>
                    <option th:each="style : ${styles}" th:value="${style.id}"
                            th:utext="${style.name}">
                    </option>
                </select>
            </div>
            <div class="mb-3">
                <label for="startDatetime" class="form-label">Datetime</label>
                <input th:field="*{startDatetime}" class="form-control" type="datetime-local" id="startDatetime"
                       name="startDatetime">
            </div>
            <div class="mb-3">
                <label for="duration" class="form-label">Duration</label>
                <input th:field="*{duration}" class="form-control" id="duration">
            </div>
            <div class="mb-3">
                <label for="roomId" class="form-label">Room</label>
                <select th:field="*{roomId}" class="form-select" aria-label="Default select example" id="roomId">
                    <option th:value="0" selected>Choose one</option>
                    <option th:each="room : ${rooms}" th:value="${room.id}"
                            th:utext="${room.name}">
                    </option>
                </select>
            </div>
            <input th:field="*{timeZone}" class="form-control" type="hidden" id="timeZone"
                   name="timeZone">
            <button type="button" onclick="putTimeZone()" class="btn btn-lg btn-success w-100 mt-2">Submit</button>
        </form>
        <form th:action="@{/operations}" th:method="get">
            <button type="submit" class="btn btn-lg btn-primary w-100 mt-2">Return</button>
        </form>
        <form th:action="@{/logout}">
            <button type="submit" class="btn btn-lg btn-danger w-100 mt-2">Logout</button>
        </form>
    </div>
</div>
</body>
<script>
    function putTimeZone(){
        let lessonForm = document.getElementById("lessonForm");
        document.getElementById("timeZone").value = Intl.DateTimeFormat().resolvedOptions().timeZone;
        lessonForm.submit();
    }
</script>
</html>