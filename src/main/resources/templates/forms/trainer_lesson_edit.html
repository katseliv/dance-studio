<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>Edit Lesson</title>
</head>
<header th:insert="header :: header"></header>
<body>
<div class="container p-5 overflow-hidden">
    <h1 class="h3 mb-5 fw-normal text-center">Edit Lesson</h1>
    <div class="container w-25">
        <form id="lessonForm" th:action="@{/lessons/__${lesson.id}__}" th:object="${lesson}" th:method="put">
            <input th:name="userTrainerId" th:value="${session.userId}" class="form-control" type="hidden"
                   id="userTrainerId">
            <div class="mb-3">
                <label for="danceStyleId" class="form-label">Dance Style</label>
                <select class="form-select" id="danceStyleId" th:field="*{danceStyleId}"
                        th:classappend="${#fields.hasErrors('danceStyleId')} ? 'is-invalid' : ''">
                    <option th:each="style : ${styles}" th:if="${style.id} == *{danceStyleId}" th:value="${style.id}"
                            th:text="${style.name}" selected>
                    <option th:each="style : ${styles}" th:unless="${style.id} == *{danceStyleId}"
                            th:value="${style.id}"
                            th:text="${style.name}">
                </select>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('danceStyleId')}"
                     th:errors="*{danceStyleId}"></div>
            </div>
            <div class="mb-3">
                <label for="startDatetime" class="form-label">Datetime</label>
                <input class="form-control" type="datetime-local" id="startDatetime" name="startDatetime"
                       th:field="*{startDatetime}" th:placeholder="*{startDatetime}"
                       th:classappend="${#fields.hasErrors('startDatetime')} ? 'is-invalid' : ''">
                <div class="invalid-feedback" th:if="${#fields.hasErrors('startDatetime')}"
                     th:errors="*{startDatetime}"></div>
            </div>
            <div class="mb-3">
                <label for="duration" class="form-label">Duration</label>
                <input th:field="*{duration}" th:placeholder="*{duration}" class="form-control" id="duration">
                <div class="invalid-feedback" th:if="${#fields.hasErrors('duration')}" th:errors="*{duration}"></div>
            </div>
            <div class="mb-3">
                <label for="roomId" class="form-label">Room</label>
                <select class="form-select" id="roomId" th:field="*{roomId}"
                        th:classappend="${#fields.hasErrors('roomId')} ? 'is-invalid' : ''">
                    <option th:each="room : ${rooms}" th:if="${room.id} == *{roomId}" th:value="${room.id}"
                            th:text="${room.name}" selected>
                    <option th:each="room : ${rooms}" th:unless="${room.id} == *{roomId}" th:value="${room.id}"
                            th:text="${room.name}">
                </select>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('roomId')}" th:errors="*{roomId}"></div>
            </div>
            <input th:field="*{timeZone}" class="form-control" type="hidden" id="timeZone" name="timeZone">
            <button type="button" onclick="putTimeZone()" class="btn btn-lg btn-outline-success w-100 mt-2">Edit
            </button>
        </form>
    </div>
</div>
</body>
<script>
    function putTimeZone() {
        let lessonForm = document.getElementById("lessonForm");
        document.getElementById("timeZone").value = Intl.DateTimeFormat().resolvedOptions().timeZone;
        lessonForm.submit();
    }
</script>
</html>
